name: Validate Deployment
run-name: Validate Deployment
on: # this only runs when a pull request is created or synchronized.
  pull_request:
    paths:
      - "force-app/main/default/**" # this only runs when changes are made to the force-app/main/default directory
      - ".github/workflows/**"      # OR if changes are made to the workflows directory
env:
  TEST_ENV: 'test'
  GH_TOKEN: ${{ github.token }}
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       
jobs:
  Validate-Deployment:
    runs-on: ubuntu-latest
    container:
      image: salesforce/cli:latest-full
    steps:      
      - uses: actions/checkout@v4
      - name: Authenticate to the DevHub
        run: echo "Implement Authentication here"
      - name: Create Scratch Org for Validation
        run: sf org create scratch --alias BrickForceCI --target-dev-hub MattZolpsDevOrg --definition-file config/project-scratch-def.json --set-default --duration-days 1
      - name: Deploy to Scratch Org and Run Tests
        run: echo "Deploying and Running Tests"